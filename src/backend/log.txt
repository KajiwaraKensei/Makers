./dist/server.js.map:{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"http-status-codes\"","webpack:///external \"mongoose\"","webpack:///./src/documents/resSendFail.ts","webpack:///./src/documents/resSendSuccess.ts","webpack:///./src/documents/authDocument.ts","webpack:///./src/models/User.ts","webpack:///./src/models/Template.ts","webpack:///external \"express\"","webpack:///external \"firebase-admin\"","webpack:///external \"body-parser\"","webpack:///./src/models/Todo.ts","webpack:///./src/models/Comment.ts","webpack:///./src/routes/comment.ts","webpack:///./src/controllers/commentController.ts","webpack:///./src/routes/account.ts","webpack:///./src/controllers/accountController.ts","webpack:///./src/controllers/templateController.ts","webpack:///./src/routes/template.ts","webpack:///./src/server.ts","webpack:///(webpack)/node_modules/process/browser.js","webpack:///external \"heroku-config\""],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","res","status","errorMessage","json","success","send","idToken","Promise","resolve","reject","verifyIdToken","then","decodedToken","uid","catch","err","schema","type","String","required","fav","Types","ObjectId","ref","template","timestamps","Template","title","author","questions","memo","comments","tags","executionCount","Number","Todo","default","done","Boolean","replay","user","router","post","req","authDocument","body","template_id","comment_id","User","findOne","targetUser","findById","targetTemplate","_id","save","result","targetComment","push","resSendSuccess","error","resSendFail","query","find","sort","updatedAt","populate","path","select","reasons","sendData","forEach","reason","date","contributor","console","log","commentCount","length","end","one","id","getSortKey","order","ob","range","page","keywords","split","keyword","RegExp","$and","$or","$in","skip","limit","exec","count","hit","recordsCount","templateId","data","updateOne","$set","raw","app","serviceAccount","credential","cert","databaseURL","useNewUrlParser","useUnifiedTopology","once","use","extended","next","a","process","port","env","PORT","listen","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","Error","defaultClearTimeout","runTimeout","fun","setTimeout","e","this","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","concat","drainQueue","timeout","len","run","marker","runClearTimeout","Item","array","noop","nextTick","args","Array","arguments","apply","browser","argv","version","versions","on","addListener","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask"],"mappings":"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","file":"server.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 14);\n","module.exports = require(\"http-status-codes\");","module.exports = require(\"mongoose\");","import * as Express from \"express\";\n\nexport default (\n  res: Express.Response,\n  status: number,\n  errorMessage: string = \"\"\n) => {\n  res.status(status).json({ success: false, errorMessage });\n};\n","import * as Express from \"express\";\nimport { OK } from \"http-status-codes\";\n\nexport default (res: Express.Response, send: object = { success: true }) => {\n  res.status(OK).json(send);\n};\n","import Todo from \"../models/Todo\";\nimport * as admin from \"firebase-admin\";\n\nexport default (idToken: string) => {\n  return new Promise(function(\n    resolve: (uid: string) => void,\n    reject: (errMessage: string) => void\n  ) {\n    if (!idToken) {\n      reject(\"認証情報が見つかりません\");\n      return;\n    }\n    admin\n      .auth()\n      .verifyIdToken(idToken)\n      .then(decodedToken => {\n        resolve(decodedToken.uid);\n      })\n      .catch(err => {\n        reject(\"認証に失敗しました\");\n      });\n  });\n};\n","import * as mongoose from \"mongoose\";\nexport interface IUserDocument extends mongoose.Document {\n  name: string;\n  uid: string;\n  fav: any[];\n  template: any[];\n}\nconst schema = new mongoose.Schema(\n  {\n    name: {\n      type: String,\n      required: true\n    },\n    uid: {\n      type: String,\n      required: true\n    },\n    fav: [\n      {\n        type: mongoose.Schema.Types.ObjectId,\n        ref: \"Template\"\n      }\n    ],\n    template: [\n      {\n        type: mongoose.Schema.Types.ObjectId,\n        ref: \"Template\",\n        required: true\n      }\n    ]\n  },\n  {\n    timestamps: true\n  }\n);\n\nconst Template = mongoose.model<IUserDocument>(\"User\", schema);\n\nexport default Template;\n","import * as mongoose from \"mongoose\";\nexport interface ITemplateDocument extends mongoose.Document {\n  title: string;\n  author: any;\n  questions: object[];\n  memo: string;\n  comments: any[];\n  tags: string[];\n  fav: any[];\n  executionCount: number;\n  template: string;\n  updatedAt: any;\n}\nconst schema = new mongoose.Schema(\n  {\n    title: {\n      type: String\n    },\n    author: {\n      type: mongoose.Schema.Types.ObjectId,\n      ref: \"User\"\n    },\n    questions: [\n      {\n        type: Object\n      }\n    ],\n    memo: {\n      type: String\n    },\n    comments: [\n      {\n        type: mongoose.Schema.Types.ObjectId,\n        ref: \"Comment\"\n      }\n    ],\n    tags: [\n      {\n        type: String\n      }\n    ],\n    template: {\n      type: String\n    },\n    executionCount: {\n      type: Number\n    },\n    fav: [\n      {\n        type: mongoose.Schema.Types.ObjectId,\n        ref: \"Users\"\n      }\n    ]\n  },\n  {\n    timestamps: true\n  }\n);\n\nconst Todo = mongoose.model<ITemplateDocument>(\"Template\", schema);\n\nexport default Todo;\n","module.exports = require(\"express\");","module.exports = require(\"firebase-admin\");","module.exports = require(\"body-parser\");","import * as mongoose from \"mongoose\";\nexport interface IUserDocument extends mongoose.Document {\n  title: String;\n  done: boolean;\n}\nconst schema = new mongoose.Schema({\n  title: {\n    type: String,\n    default: \"\"\n  },\n  done: {\n    type: Boolean,\n    default: false\n  }\n});\n\nconst Todo = mongoose.model<IUserDocument>(\"Todo\", schema);\n\nexport default Todo;\n","import * as mongoose from \"mongoose\";\nexport interface IUserDocument extends mongoose.Document {\n  replay: any[];\n  template: any;\n  value: string;\n  user: any;\n  updatedAt: any;\n}\nconst schema = new mongoose.Schema(\n  {\n    replay: [{ type: mongoose.Schema.Types.ObjectId, ref: \"Comment\" }],\n    value: {\n      type: String,\n      required: true\n    },\n    template: {\n      type: mongoose.Schema.Types.ObjectId,\n      ref: \"Template\",\n      required: true\n    },\n    user: {\n      type: mongoose.Schema.Types.ObjectId,\n      ref: \"User\",\n      required: true\n    }\n  },\n  {\n    timestamps: true\n  }\n);\n\nconst Comment = mongoose.model<IUserDocument>(\"Comment\", schema);\n\nexport default Comment;\n","import * as Express from \"express\";\nimport { addComment, getComment } from \"../controllers/commentController\";\n\nconst router = Express.Router();\n\nrouter.post(\"/add\", addComment);\nrouter.get(\"/\", getComment);\nexport default router;\n","import * as Express from \"express\";\nimport authDocument from \"../documents/authDocument\";\nimport User from \"../models/User\";\nimport Comment from \"../models/Comment\";\nimport Template from \"../models/Template\";\nimport * as status from \"http-status-codes\";\nimport resSendFail from \"../documents/resSendFail\";\nimport resSendSuccess from \"../documents/resSendSuccess\";\n\n// コメントの追加\nexport const addComment = (req: Express.Request, res: Express.Response) => {\n  try {\n    authDocument(req.body.idToken as string)\n      .then(async uid => {\n        const { value, template_id, comment_id } = req.body;\n\n        const targetUser = await User.findOne({ uid });\n        let targetTemplate = await Template.findById(template_id);\n        const newComment = new Comment({\n          replay: [],\n          template: targetTemplate._id,\n          user: targetUser._id,\n          value\n        });\n        const result = await newComment.save();\n\n        if (comment_id) {\n          let targetComment = await Comment.findById(comment_id);\n          targetComment.replay.push(result._id);\n          await targetComment.save();\n        }\n        targetTemplate.comments.push(result._id);\n        await targetTemplate.save();\n        resSendSuccess(res, { success: true });\n      })\n\n      .catch(error => {\n        resSendFail(res, status.PRECONDITION_FAILED, error);\n      });\n  } catch {}\n};\n\n// コメントの取得\nexport const getComment = async (\n  req: Express.Request,\n  res: Express.Response\n) => {\n  try {\n    const query = req.query;\n    await Comment.find({\n      template: query.template_id\n    })\n      .sort({ updatedAt: -1 })\n      .populate({ path: \"user\", select: [\"name\", \"uid\"] })\n      .then(reasons => {\n        const sendData = [];\n        reasons.forEach(reason => {\n          sendData.push({\n            value: reason.value,\n            date: reason.updatedAt,\n            contributor: {\n              name: reason.user.name,\n              uid: reason.user.uid\n            }\n          });\n        });\n        console.log(sendData);\n\n        resSendSuccess(res, {\n          success: true,\n          result: sendData,\n          commentCount: sendData.length\n        });\n      })\n      .catch(error => {\n        console.log(error);\n\n        resSendFail(res, status.PRECONDITION_FAILED, error);\n      });\n  } catch {\n    error => {\n      console.log(error);\n      resSendFail(res, status.INTERNAL_SERVER_ERROR, \"サーバーエラー\");\n    };\n  }\n};\n","import * as Express from \"express\";\nimport {\n  addUser,\n  changeUserName,\n  getUserInfo\n} from \"../controllers/accountController\";\n\nconst router = Express.Router();\n\nrouter.post(\"/add\", addUser);\nrouter.post(\"/change_name\", changeUserName);\nrouter.post(\"/\", getUserInfo);\nexport default router;\n","import * as Express from \"express\";\nimport authDocument from \"../documents/authDocument\";\nimport User from \"../models/User\";\nimport * as status from \"http-status-codes\";\nimport resSendSuccess from \"../documents/resSendSuccess\";\nimport resSendFail from \"../documents/resSendFail\";\n\n// addUser\n// ユーザーの追加\nexport const addUser = (req: Express.Request, res: Express.Response) => {\n  //トークン( req.body.idToken )が正しいかの認証。　正しかったらユーザーIDが帰ってくる\n  authDocument(req.body.idToken as string)\n    .then(uid => {\n      // ユーザーの作成\n      const newUser = new User({\n        name: req.body.name,\n        uid,\n        fav: [],\n        template: []\n      });\n\n      // ユーザーの保存\n      return newUser.save();\n    })\n    .then(result => {\n      console.log(\"Success! _id: \" + result._id);\n      res\n        .status(status.OK)\n        .json({ success: true, name: result.name })\n        .end();\n    })\n    .catch(err => {\n      res\n        .status(status.PRECONDITION_FAILED)\n        .json({ success: false, errorMessage: err })\n        .end();\n    });\n};\n// changeUserName\n// ユーザー名の変更\nexport const changeUserName = (req: Express.Request, res: Express.Response) => {\n  authDocument(req.body.idToken as string)\n    .then(async uid => {\n      // 対象のユーザーの検索\n      let targetUser = await User.findOne({ uid });\n\n      // 変更\n      targetUser.name = req.body.name;\n\n      // 保存\n      return targetUser.save();\n    })\n    .then(result => {\n      console.log(\"Success change name! _id: \" + result._id);\n      res\n        .status(status.OK)\n        .json({ success: true })\n        .end();\n    })\n    .catch(err => {\n      res\n        .status(status.PRECONDITION_FAILED)\n        .json({ success: false, errorMessage: err })\n        .end();\n    });\n};\nexport const getUserInfo = (req: Express.Request, res: Express.Response) => {\n  authDocument(req.body.idToken as string)\n    .then(async uid => {\n      // 対象のユーザーの検索\n      let targetUser = await User.findOne({ uid }).populate({\n        path: \"template\",\n        select: [\n          \"executionCount\",\n          \"title\",\n          \"fav\",\n          \"tags\",\n          \"memo\",\n          \"comments\",\n          \"updatedAt\",\n          \"template\",\n          \"questions\"\n        ]\n      });\n      if (!targetUser) {\n        resSendFail(res, status.NOT_FOUND, \"見つかりません\");\n        return;\n      }\n      let template = [];\n      targetUser.template.forEach(one => {\n        template = [\n          ...template,\n          {\n            id: one._id,\n            title: one.title,\n            executionCount: one.executionCount,\n            tags: one.tags,\n            memo: one.memo,\n            fav: one.fav.length,\n            comments: one.comments.length,\n            date: one.updatedAt,\n            questions: one.questions,\n            template: one.template\n          }\n        ];\n      });\n      console.log(template);\n\n      resSendSuccess(res, { success: true, uid: targetUser.uid, template });\n    })\n    .catch(err => {\n      res\n        .status(status.PRECONDITION_FAILED)\n        .json({ success: false, errorMessage: err })\n        .end();\n    });\n};\n","import * as Express from \"express\";\nimport authDocument from \"../documents/authDocument\";\nimport * as status from \"http-status-codes\";\nimport User from \"../models/User\";\nimport Template, { ITemplateDocument } from \"../models/Template\";\nimport resSendFail from \"../documents/resSendFail\";\nimport resSendSuccess from \"../documents/resSendSuccess\";\n\n// ______________________________________________________\n// addTemplate\n// テンプレートの追加\n\nexport const addTemplate = (req: Express.Request, res: Express.Response) => {\n  try {\n    //トークン ( req.body.idToken ) が正しいかの検証。　正しければユーザーIDが帰ってくる\n    authDocument(req.body.idToken as string)\n      .then(async uid => {\n        let targetUser = await User.findOne({ uid });\n        console.log(targetUser);\n\n        console.log(\"_id: \" + targetUser._id);\n\n        // テンプレートの作成\n        const { title, questions, memo, tags, template } = req.body;\n        const newTemplate = new Template({\n          title,\n          author: targetUser._id,\n          questions,\n          memo,\n          comments: [],\n          tags,\n          template,\n          executionCount: 0\n        });\n\n        // テンプレートの保存\n        const result = await newTemplate.save();\n\n        // ユーザー情報の変更\n        targetUser.template = [...targetUser.template, result._id];\n\n        // ユーザーの保存\n        await targetUser.save();\n\n        console.log(\"Success! _id: \" + result._id);\n        resSendSuccess(res, {\n          success: true,\n          id: result._id\n        });\n      })\n      .catch(error => {\n        console.log(error);\n\n        resSendFail(res, status.PRECONDITION_FAILED, error);\n      });\n  } catch {\n    error => {\n      console.log(error);\n      resSendFail(res, status.INTERNAL_SERVER_ERROR, \"サーバーエラー\");\n    };\n  }\n};\n// ______________________________________________________\n// updateTemplate\n\nexport const updateTemplate = (req: Express.Request, res: Express.Response) => {\n  try {\n    console.log(\"try template update\");\n\n    authDocument(req.body.idToken as string)\n      .then(async uid => {\n        console.log(\"uid: \" + uid);\n        console.log(\"id: \" + req.body.id);\n        console.log(\"data: \");\n        console.log(req.body.data);\n        const targetUser = await User.findOne({ uid });\n        console.log(\"targetUser: \");\n        console.log(targetUser);\n\n        // デンプレートの更新\n        Template.updateOne(\n          { _id: req.body.id },\n          { $set: req.body.data },\n          (error, raw) => {\n            if (error) {\n              console.log(\"error: \");\n\n              console.log(error);\n              resSendFail(res, status.EXPECTATION_FAILED, error);\n            } else {\n              console.log(raw);\n              resSendSuccess(res);\n            }\n          }\n        );\n      })\n      .catch(error => {\n        resSendFail(res, status.PRECONDITION_FAILED, error);\n      });\n  } catch {\n    error => {\n      console.log(error);\n      resSendFail(res, status.INTERNAL_SERVER_ERROR, \"サーバーエラー\");\n    };\n  }\n};\n\n// ______________________________________________________\n// countUpTemplate\n\nexport const countUpTemplate = async (\n  req: Express.Request,\n  res: Express.Response\n) => {\n  try {\n    let targetTemplate = await Template.findById(req.body.id);\n    console.log(targetTemplate);\n    if (!!!targetTemplate) {\n      resSendFail(res, status.NOT_FOUND, \"テンプレートが見つかりませんでした\");\n      return;\n    }\n    targetTemplate.executionCount++;\n    targetTemplate.save();\n    resSendSuccess(res);\n  } catch {\n    error => {\n      console.log(error);\n      resSendFail(res, status.INTERNAL_SERVER_ERROR, \"サーバーエラー\");\n    };\n  }\n};\n// ______________________________________________________\n//\nexport const doTemplateFav = (req: Express.Request, res) => {\n  try {\n    //トークン ( req.body.idToken ) が正しいかの検証。　正しければユーザーIDが帰ってくる\n    authDocument(req.body.idToken as string)\n      .then(async uid => {\n        let targetTemplate = await Template.findOne({ _id: req.body.id });\n        let targetUser = await User.findOne({ uid });\n        targetUser.fav.push(targetTemplate._id);\n        targetUser.fav = targetUser.fav.filter(\n          (x, i, self) => self.indexOf(x) === i\n        );\n        targetTemplate.fav.push(targetTemplate._id);\n        targetTemplate.fav = targetTemplate.fav.filter(\n          (x, i, self) => self.indexOf(x) === i\n        );\n\n        targetTemplate.save();\n        targetUser.save();\n        resSendSuccess(res);\n      })\n      .catch(error => {\n        resSendFail(res, status.PRECONDITION_FAILED, error);\n      });\n  } catch {\n    error => {\n      console.log(error);\n      resSendFail(res, status.INTERNAL_SERVER_ERROR, \"サーバーエラー\");\n    };\n  }\n};\n// ______________________________________________________\n//\n\nexport const doDeleteTemplateFav = (req: Express.Request, res) => {\n  try {\n    //トークン ( req.body.idToken ) が正しいかの検証。　正しければユーザーIDが帰ってくる\n    authDocument(req.body.idToken as string)\n      .then(async uid => {\n        let targetTemplate = await Template.findOne({ _id: req.body.id });\n        let targetUser = await User.findOne({ uid });\n\n        targetUser.fav = targetUser.fav.filter(v => v !== targetTemplate._id);\n        targetTemplate.fav = targetTemplate.fav.filter(\n          v => v !== targetUser._id\n        );\n        targetTemplate.save();\n        targetUser.save();\n        resSendSuccess(res);\n      })\n      .catch(error => {\n        resSendFail(res, status.PRECONDITION_FAILED, error);\n      });\n  } catch {\n    error => {\n      console.log(error);\n      resSendFail(res, status.INTERNAL_SERVER_ERROR, \"サーバーエラー\");\n    };\n  }\n};\n// ______________________________________________________\n// countUpTemplate\n\nexport const getTemplate = async (req: Express.Request, res) => {\n  try {\n    const templateId = req.body.templateId;\n    console.log(templateId);\n\n    await Template.findById(\n      templateId,\n      (err: any, targetTemplate: ITemplateDocument) => {\n        if (err) {\n          console.log(\"見つからない\");\n          resSendFail(res, status.PRECONDITION_FAILED, \"見つかりませんでした\");\n          return;\n        }\n        console.log(\"success\");\n        console.log(targetTemplate);\n\n        resSendSuccess(res, {\n          success: true,\n          author: targetTemplate.author,\n          title: targetTemplate.title,\n          questions: targetTemplate.questions,\n          memo: targetTemplate.memo,\n          tags: targetTemplate.tags,\n          template: targetTemplate.template,\n          fav: targetTemplate.fav.length\n        });\n      }\n    );\n  } catch {\n    error => {\n      console.log(error);\n      resSendFail(res, status.INTERNAL_SERVER_ERROR, \"サーバーエラー\");\n    };\n  }\n};\n\nexport const showTemplates = (req: Express.Request, res: Express.Response) => {\n  try {\n    console.log(\"show\");\n\n    const query = req.query;\n    let QueryData = {\n      range: 10,\n      page: 1,\n      sort: 0,\n      order: -1,\n      tags: [],\n      keywords: []\n    };\n    if (query.range) {\n      const range = query.range - 0;\n      if (range <= 100 && 0 < range) {\n        QueryData[\"range\"] = range;\n      }\n    }\n    if (query.page) {\n      if (query.page - 0 > 0) QueryData[\"page\"] = query.page - 0;\n    }\n    if (query.sort) {\n      const sort = query.sort - 0;\n      if (0 <= sort && sort < 3) {\n        QueryData[\"sort\"] = sort;\n      }\n    }\n    if (query.order) {\n      const order = query.order - 0;\n      if (order === 1) QueryData[\"order\"] = 1;\n    }\n    if (query.tags) {\n      //const tags = query.tags.split(\"||\");\n      //let _tags = [];\n      //tags.forEach(tag => _tags.push(new RegExp(tag)));\n      QueryData[\"tags\"] = (query.tags as string).split(\"||\");\n    }\n\n    if (query.keywords) {\n      const keywords = (query.keywords as string).split(\"||\");\n      let _keywords = [];\n      keywords.forEach(keyword => _keywords.push(new RegExp(keyword)));\n      QueryData[\"keywords\"] = _keywords;\n    }\n    let ob = {};\n    if (QueryData.keywords.length && QueryData.tags.length) {\n      ob = {\n        $and: [\n          {\n            $or: [\n              { title: { $in: QueryData.keywords } },\n              { template: { $in: QueryData.keywords } },\n              { memo: { $in: QueryData.keywords } }\n            ]\n          },\n          { tags: { $in: QueryData.tags } }\n        ]\n      };\n    } else if (QueryData.keywords.length) {\n      ob = {\n        $or: [\n          { title: { $in: QueryData.keywords } },\n          { template: { $in: QueryData.keywords } },\n          { memo: { $in: QueryData.keywords } }\n        ]\n      };\n    } else if (QueryData.tags.length) {\n      ob = { tags: { $in: QueryData.tags } };\n    }\n    Template.find(ob)\n      .sort(getSortKey(QueryData.sort, QueryData.order))\n      .skip(QueryData.range * (QueryData.page - 1))\n      .limit(QueryData.range)\n      .populate([{ path: \"author\", select: \"name\" }])\n      .exec(async (error, result) => {\n        if (error) {\n          resSendFail(res, status.NOT_FOUND, \"見つかりませんでした\");\n          return;\n        }\n        let sendData = [];\n        result.forEach(one => {\n          console.log(one.updatedAt);\n          const {\n            questions,\n            comments,\n            tags,\n            fav,\n            _id,\n            title,\n            author,\n            memo,\n            template,\n            executionCount,\n            updatedAt\n          } = one;\n          sendData = [\n            ...sendData,\n            {\n              id: _id,\n              questions,\n              comments: comments.length,\n              tags,\n              fav: fav.length,\n              title,\n              author,\n              memo,\n              template,\n              executionCount,\n              date: updatedAt\n            }\n          ];\n        });\n        const hit = await Template.find(ob).count();\n        resSendSuccess(res, {\n          success: true,\n          result: sendData,\n          recordsCount: sendData.length,\n          page: QueryData.page,\n          range: QueryData.range,\n          hit\n        });\n      })\n      .catch(err => {\n        console.log(err);\n        resSendFail(res, status.PRECONDITION_FAILED, \"エラー\");\n      });\n  } catch {\n    error => {\n      console.log(error);\n      resSendFail(res, status.INTERNAL_SERVER_ERROR, \"サーバーエラー\");\n    };\n  }\n};\n\nconst getSortKey = (sort, order) => {\n  const sortType = [\"updatedAt\", \"fav\", \"executionCount\"];\n  const ob = {};\n  ob[sortType[sort]] = order;\n  console.log(ob);\n  return ob;\n};\n","import * as Express from \"express\";\nimport {\n  addTemplate,\n  getTemplate,\n  updateTemplate,\n  showTemplates,\n  countUpTemplate\n} from \"../controllers/templateController\";\nconst router = Express.Router();\n\nrouter.get(\"/\", showTemplates);\nrouter.post(\"/execution\", countUpTemplate);\nrouter.post(\"/add\", addTemplate);\nrouter.post(\"/get\", getTemplate);\nrouter.post(\"/save\", updateTemplate);\n\nexport default router;\n","import { Request, Response, NextFunction } from \"express\";\nimport * as mongoose from \"mongoose\";\nimport Todo from \"./models/Todo\";\nimport * as bodyParser from \"body-parser\";\nimport * as admin from \"firebase-admin\";\nimport account from \"./routes/account\";\nimport template from \"./routes/template\";\nimport comment from \"./routes/comment\";\nimport \"heroku-config\";\nimport * as express from \"express\";\n//declare var process: NodeJS.Process;\n// export interface ProcessEnv {\n//   [key: string]: string | undefined;\n// }\nconst app = express();\nconst url =\n  \"mongodb://heroku_pkdqdmpl:og9870460gbsevrjf401f9542v@ds257054.mlab.com:57054/heroku_pkdqdmpl\"; // \"mongodb://mongodb/myapp\";\n//const port = process.env.PORT || 3000;\n\n// =======================\n// configuration\n// =======================\n// server setting\n\nlet serviceAccount = require(\"../template-2013-firebase-adminsdk-nfjo5-366a604e70.json\");\n\nadmin.initializeApp({\n  credential: admin.credential.cert(serviceAccount),\n  databaseURL: \"https://template-2013.firebaseio.com\"\n});\nmongoose.connect(url, {\n  useNewUrlParser: true,\n  useUnifiedTopology: true\n});\nconst db = mongoose.connection;\ndb.once(\"open\", () => {\n  console.log(\"Successfully connected to MongoDB using Mongoose!\");\n});\n\napp.use(bodyParser.urlencoded({ extended: false }));\napp.use(bodyParser.json());\n\n// =======================\n// routes\n// =======================\n\napp.use(\"/account\", account);\napp.use(\"/template\", template);\napp.use(\"/comment\", comment);\napp.get(\"/\", (req: Request, res: Response, next: NextFunction) => {\n  console.log(\"hello\");\n\n  res.send({ name: \"kaj\" });\n});\napp.get(\"/add\", (req: Request, res: Response, next: NextFunction) => {\n  const nexTodo = new Todo({\n    title: \"ooo\",\n    done: false\n  });\n  nexTodo\n    .save()\n    .then(() => console.log(\"success!!\"))\n    .catch(err => console.log(err));\n  res.json({ a: \"a\" });\n});\n\nconsole.log(process);\nvar port = process.env.PORT;\nconsole.log(port);\napp.listen(port, () => {\n  console.log(`Listen on port ${port}.`);\n});\n\nexport default app;\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","module.exports = require(\"heroku-config\");"],"sourceRoot":""}
./node_modules/bson/browser_build/bson.js:	process.env = {};
./node_modules/dotenv/README.md:  process.env[k] = envConfig[k]
./node_modules/dotenv/lib/env-options.js:if (process.env.DOTENV_CONFIG_ENCODING != null) {
./node_modules/dotenv/lib/env-options.js:if (process.env.DOTENV_CONFIG_PATH != null) {
./node_modules/dotenv/lib/env-options.js:if (process.env.DOTENV_CONFIG_DEBUG != null) {
./node_modules/dotenv/lib/main.js:        process.env[key] = parsed[key]
./node_modules/commander/Readme.md:  process.env.VERBOSE = this.verbose;
./node_modules/mquery/node_modules/debug/src/node.js:    process.env.DEBUG = namespaces;
./node_modules/deep-equal/test/cmp.js:var isBrokenNode = isNode && process.env.ASSERT && semver.satisfies(process.version, '<= 13.3.0');
./node_modules/grpc/node_modules/needle/test/utils/test.js:process.env.DEBUG = true;
./node_modules/grpc/node_modules/rc/test/nested-env-vars.js:process.env[n+'_someOpt__a'] = 42
./node_modules/grpc/node_modules/rc/test/nested-env-vars.js:process.env[n+'_someOpt__x__'] = 99
./node_modules/grpc/node_modules/rc/test/nested-env-vars.js:process.env[n+'_someOpt__a__b'] = 186
./node_modules/grpc/node_modules/rc/test/nested-env-vars.js:process.env[n+'_someOpt__a__b__c'] = 243
./node_modules/grpc/node_modules/rc/test/nested-env-vars.js:process.env[n+'_someOpt__x__y'] = 1862
./node_modules/grpc/node_modules/rc/test/nested-env-vars.js:process.env[n+'_someOpt__z'] = 186577
./node_modules/grpc/node_modules/rc/test/nested-env-vars.js:process.env[n+'_someOpt__z__x__'] = 18629
./node_modules/grpc/node_modules/rc/test/nested-env-vars.js:process.env[n+'_someOpt__w__w__'] = 18629
./node_modules/grpc/node_modules/rc/test/nested-env-vars.js:process.env[n+'___z__i__'] = 9999
./node_modules/grpc/node_modules/rc/test/nested-env-vars.js:process.env[N+'_test_upperCase'] = 187
./node_modules/grpc/node_modules/rc/test/test.js:process.env[n+'_envOption'] = 42
./node_modules/grpc/node_modules/readable-stream/readable.js:if (process.env.READABLE_STREAM === 'disable' && Stream) {
./node_modules/grpc/node_modules/readable-stream/writable.js:if (process.env.READABLE_STREAM === 'disable') {
./node_modules/grpc/node_modules/nopt/test/basic.js:  if (!process.env[the.key]) process.env[the.key] = v.dir
./node_modules/grpc/node_modules/nopt/examples/my-program.js://process.env.DEBUG_NOPT = 1
./node_modules/grpc/node_modules/debug/dist/debug.js:      process.env = {};
./node_modules/grpc/node_modules/debug/src/node.js:    process.env.DEBUG = namespaces;
./node_modules/es-get-iterator/test/index.js:var getIterator = process.env.TEST_VARIANT === 'node' ? require('../node') : require('../');
./node_modules/bun/node_modules/readable-stream/readable.js:if (!process.browser && process.env.READABLE_STREAM === 'disable') {
./node_modules/@google-cloud/firestore/build/src/index.js:        this._preferTransactions = process.env.FUNCTION_TRIGGER_TYPE !== undefined;
./node_modules/@google-cloud/storage/node_modules/readable-stream/readable.js:if (process.env.READABLE_STREAM === 'disable' && Stream) {
./node_modules/bluebird/js/release/util.js:    typeof process.env !== "undefined";
./node_modules/bluebird/js/browser/bluebird.core.js:    typeof process.env !== "undefined";
./node_modules/bluebird/js/browser/bluebird.min.js:this._howMany=0,this._unwrap=!1,this._initialized=!1}function o(t,e){if((0|e)!==e||0>e)return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new i(t),o=n.promise();return n.setHowMany(e),n.init(),o}var s=t("./util"),a=t("./errors").RangeError,c=t("./errors").AggregateError,l=s.isArray,u={};s.inherits(i,n),i.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var t=l(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},i.prototype.init=function(){this._initialized=!0,this._init()},i.prototype.setUnwrap=function(){this._unwrap=!0},i.prototype.howMany=function(){return this._howMany},i.prototype.setHowMany=function(t){this._howMany=t},i.prototype._promiseFulfilled=function(t){return this._addFulfilled(t),this._fulfilled()===this.howMany()?(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0):!1},i.prototype._promiseRejected=function(t){return this._addRejected(t),this._checkOutcome()},i.prototype._promiseCancelled=function(){return this._values instanceof e||null==this._values?this._cancel():(this._addRejected(u),this._checkOutcome())},i.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var t=new c,e=this.length();e<this._values.length;++e)this._values[e]!==u&&t.push(this._values[e]);return t.length>0?this._reject(t):this._cancel(),!0}return!1},i.prototype._fulfilled=function(){return this._totalResolved},i.prototype._rejected=function(){return this._values.length-this.length()},i.prototype._addRejected=function(t){this._values.push(t)},i.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},i.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},i.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new a(e)},i.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return o(t,e)},e.prototype.some=function(t){return o(this,t)},e._SomePromiseArray=i}},{"./errors":12,"./util":36}],32:[function(t,e,n){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValueField=t._isFateSealed()?t._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var n=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=e.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},o=e.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},s=e.prototype.isPending=function(){return 0===(50397184&this._bitField)},a=e.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};e.prototype.isCancelled=function(){return 0!==(8454144&this._bitField)},t.prototype.__isCancelled=function(){return 65536===(65536&this._bitField)},t.prototype._isCancelled=function(){return this._target().__isCancelled()},t.prototype.isCancelled=function(){return 0!==(8454144&this._target()._bitField)},t.prototype.isPending=function(){return s.call(this._target())},t.prototype.isRejected=function(){return o.call(this._target())},t.prototype.isFulfilled=function(){return i.call(this._target())},t.prototype.isResolved=function(){return a.call(this._target())},t.prototype.value=function(){return n.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),r.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}},{}],33:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t,r){if(u(t)){if(t instanceof e)return t;var i=o(t);if(i===l){r&&r._pushContext();var c=e.reject(i.e);return r&&r._popContext(),c}if("function"==typeof i){if(s(t)){var c=new e(n);return t._then(c._fulfill,c._reject,void 0,c,null),c}return a(t,i,r)}}return t}function i(t){return t.then}function o(t){try{return i(t)}catch(e){return l.e=e,l}}function s(t){try{return p.call(t,"_promise0")}catch(e){return!1}}function a(t,r,i){function o(t){a&&(a._resolveCallback(t),a=null)}function s(t){a&&(a._rejectCallback(t,p,!0),a=null)}var a=new e(n),u=a;i&&i._pushContext(),a._captureStackTrace(),i&&i._popContext();var p=!0,h=c.tryCatch(r).call(t,o,s);return p=!1,a&&h===l&&(a._rejectCallback(h.e,!0,!0),a=null),u}var c=t("./util"),l=c.errorObj,u=c.isObject,p={}.hasOwnProperty;return r}},{"./util":36}],34:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t){this.handle=t}function o(t){return clearTimeout(this.handle),t}function s(t){throw clearTimeout(this.handle),t}var a=t("./util"),c=e.TimeoutError;i.prototype._resultCancelled=function(){clearTimeout(this.handle)};var l=function(t){return u(+this).thenReturn(t)},u=e.delay=function(t,o){var s,a;return void 0!==o?(s=e.resolve(o)._then(l,null,null,t,void 0),r.cancellation()&&o instanceof e&&s._setOnCancel(o)):(s=new e(n),a=setTimeout(function(){s._fulfill()},+t),r.cancellation()&&s._setOnCancel(new i(a)),s._captureStackTrace()),s._setAsyncGuaranteed(),s};e.prototype.delay=function(t){return u(t,this)};var p=function(t,e,n){var r;r="string"!=typeof e?e instanceof Error?e:new c("operation timed out"):new c(e),a.markAsOriginatingFromRejection(r),t._attachExtraTrace(r),t._reject(r),null!=n&&n.cancel()};e.prototype.timeout=function(t,e){t=+t;var n,a,c=new i(setTimeout(function(){n.isPending()&&p(n,e,a)},t));return r.cancellation()?(a=this.then(),n=a._then(o,s,void 0,c,void 0),n._setOnCancel(c)):n=this._then(o,s,void 0,c,void 0),n}}},{"./util":36}],35:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,s){function a(t){setTimeout(function(){throw t},0)}function c(t){var e=r(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}function l(t,n){function i(){if(s>=l)return u._fulfill();var o=c(t[s++]);if(o instanceof e&&o._isDisposable()){try{o=r(o._getDisposer().tryDispose(n),t.promise)}catch(p){return a(p)}if(o instanceof e)return o._then(i,a,null,null,null)}i()}var s=0,l=t.length,u=new e(o);return i(),u}function u(t,e,n){this._data=t,this._promise=e,this._context=n}function p(t,e,n){this.constructor$(t,e,n)}function h(t){return u.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}function f(t){this.length=t,this.promise=null,this[t-1]=null}var _=t("./util"),d=t("./errors").TypeError,v=t("./util").inherits,y=_.errorObj,m=_.tryCatch,g={};u.prototype.data=function(){return this._data},u.prototype.promise=function(){return this._promise},u.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():g},u.prototype.tryDispose=function(t){var e=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=e!==g?this.doDispose(e,t):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},u.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},v(p,u),p.prototype.doDispose=function(t,e){var n=this.data();return n.call(t,t,e)},f.prototype._resultCancelled=function(){for(var t=this.length,n=0;t>n;++n){var r=this[n];r instanceof e&&r.cancel()}},e.using=function(){var t=arguments.length;if(2>t)return n("you must pass at least 2 arguments to Promise.using");var i=arguments[t-1];if("function"!=typeof i)return n("expecting a function but got "+_.classString(i));var o,a=!0;2===t&&Array.isArray(arguments[0])?(o=arguments[0],t=o.length,a=!1):(o=arguments,t--);for(var c=new f(t),p=0;t>p;++p){var d=o[p];if(u.isDisposer(d)){var v=d;d=d.promise(),d._setDisposable(v)}else{var g=r(d);g instanceof e&&(d=g._then(h,null,null,{resources:c,index:p},void 0))}c[p]=d}for(var b=new Array(c.length),p=0;p<b.length;++p)b[p]=e.resolve(c[p]).reflect();var w=e.all(b).then(function(t){for(var e=0;e<t.length;++e){var n=t[e];if(n.isRejected())return y.e=n.error(),y;if(!n.isFulfilled())return void w.cancel();t[e]=n.value()}C._pushContext(),i=m(i);var r=a?i.apply(void 0,t):i(t),o=C._popContext();return s.checkForgottenReturns(r,o,"Promise.using",C),r}),C=w.lastly(function(){var t=new e.PromiseInspection(w);return l(c,t)});return c.promise=C,C._setOnCancel(c),C},e.prototype._setDisposable=function(t){this._bitField=131072|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(131072&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},e.prototype.disposer=function(t){if("function"==typeof t)return new p(t,this,i());throw new d}}},{"./errors":12,"./util":36}],36:[function(t,e,n){"use strict";function r(){try{var t=P;return P=null,t.apply(this,arguments)}catch(e){return T.e=e,T}}function i(t){return P=t,r}function o(t){return null==t||t===!0||t===!1||"string"==typeof t||"number"==typeof t}function s(t){return"function"==typeof t||"object"==typeof t&&null!==t}function a(t){return o(t)?new Error(v(t)):t}function c(t,e){var n,r=t.length,i=new Array(r+1);for(n=0;r>n;++n)i[n]=t[n];return i[n]=e,i}function l(t,e,n){if(!F.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var r=Object.getOwnPropertyDescriptor(t,e);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function u(t,e,n){if(o(t))return t;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return F.defineProperty(t,e,r),t}function p(t){throw t}function h(t){try{if("function"==typeof t){var e=F.names(t.prototype),n=F.isES5&&e.length>1,r=e.length>0&&!(1===e.length&&"constructor"===e[0]),i=A.test(t+"")&&F.names(t).length>0;if(n||r||i)return!0}return!1}catch(o){return!1}}function f(t){function e(){}e.prototype=t;for(var n=8;n--;)new e;return t}function _(t){return D.test(t)}function d(t,e,n){for(var r=new Array(t),i=0;t>i;++i)r[i]=e+i+n;return r}function v(t){try{return t+""}catch(e){return"[no string representation]"}}function y(t){return t instanceof Error||null!==t&&"object"==typeof t&&"string"==typeof t.message&&"string"==typeof t.name}function m(t){try{u(t,"isOperational",!0)}catch(e){}}function g(t){return null==t?!1:t instanceof Error.__BluebirdErrorTypes__.OperationalError||t.isOperational===!0}function b(t){return y(t)&&F.propertyIsWritable(t,"stack")}function w(t){return{}.toString.call(t)}function C(t,e,n){for(var r=F.names(t),i=0;i<r.length;++i){var o=r[i];if(n(o))try{F.defineProperty(e,o,F.getDescriptor(t,o))}catch(s){}}}function j(t){return N?process.env[t]:void 0}function E(){if("function"==typeof Promise)try{var t=new Promise(function(){});if("[object Promise]"==={}.toString.call(t))return Promise}catch(e){}}function k(t,e){return t.bind(e)}var F=t("./es5"),x="undefined"==typeof navigator,T={e:{}},P,R="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0!==this?this:null,S=function(t,e){function n(){this.constructor=t,this.constructor$=e;for(var n in e.prototype)r.call(e.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=e.prototype[n])}var r={}.hasOwnProperty;return n.prototype=e.prototype,t.prototype=new n,t.prototype},O=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var n=0;n<t.length;++n)if(t[n]===e)return!0;return!1};if(F.isES5){var n=Object.getOwnPropertyNames;return function(t){for(var r=[],i=Object.create(null);null!=t&&!e(t);){var o;try{o=n(t)}catch(s){return r}for(var a=0;a<o.length;++a){var c=o[a];if(!i[c]){i[c]=!0;var l=Object.getOwnPropertyDescriptor(t,c);null!=l&&null==l.get&&null==l.set&&r.push(c)}}t=F.getPrototypeOf(t)}return r}}var r={}.hasOwnProperty;return function(n){if(e(n))return[];var i=[];t:for(var o in n)if(r.call(n,o))i.push(o);else{for(var s=0;s<t.length;++s)if(r.call(t[s],o))continue t;i.push(o)}return i}}(),A=/this\s*\.\s*\S+\s*=/,D=/^[a-z$_][a-z$_0-9]*$/i,V=function(){return"stack"in new Error?function(t){return b(t)?t:new Error(v(t))}:function(t){if(b(t))return t;try{throw new Error(v(t))}catch(e){return e}}}(),I=function(t){return F.isArray(t)?t:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var L="function"==typeof Array.from?function(t){return Array.from(t)}:function(t){for(var e,n=[],r=t[Symbol.iterator]();!(e=r.next()).done;)n.push(e.value);return n};I=function(t){return F.isArray(t)?t:null!=t&&"function"==typeof t[Symbol.iterator]?L(t):null}}var H="undefined"!=typeof process&&"[object process]"===w(process).toLowerCase(),N="undefined"!=typeof process&&"undefined"!=typeof process.env,B={isClass:h,isIdentifier:_,inheritedDataKeys:O,getDataPropertyOrDefault:l,thrower:p,isArray:F.isArray,asArray:I,notEnumerableProp:u,isPrimitive:o,isObject:s,isError:y,canEvaluate:x,errorObj:T,tryCatch:i,inherits:S,withAppended:c,maybeWrapAsError:a,toFastProperties:f,filledRange:d,toString:v,canAttachTrace:b,ensureErrorObject:V,originatesFromRejection:g,markAsOriginatingFromRejection:m,classString:w,copyDescriptors:C,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:H,hasEnvVariables:N,env:j,global:R,getNativePromise:E,domainBind:k};B.isRecentNode=B.isNode&&function(){var t=process.versions.node.split(".").map(Number);return 0===t[0]&&t[1]>10||t[0]>0}(),B.isNode&&B.toFastProperties(process);try{throw new Error}catch(U){B.lastLineError=U}e.exports=B},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise);
./node_modules/bluebird/js/browser/bluebird.core.min.js:},i.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},i.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new k(this).promise()},i.prototype.error=function(t){return this.caught(h.originatesFromRejection,t)},i.getNewLibraryCopy=e.exports,i.is=function(t){return t instanceof i},i.fromNode=i.fromCallback=function(t){var e=new i(b);e._captureStackTrace();var n=arguments.length>1?!!Object(arguments[1]).multiArgs:!1,r=x(t)(R(e,n));return r===S&&e._rejectCallback(r.e,!0),e._isFateSealed()||e._setAsyncGuaranteed(),e},i.all=function(t){return new k(t).promise()},i.cast=function(t){var e=E(t);return e instanceof i||(e=new i(b),e._captureStackTrace(),e._setFulfilled(),e._rejectionHandler0=t),e},i.resolve=i.fulfilled=i.cast,i.reject=i.rejected=function(t){var e=new i(b);return e._captureStackTrace(),e._rejectCallback(t,!0),e},i.setScheduler=function(t){if("function"!=typeof t)throw new g("expecting a function but got "+h.classString(t));return v.setScheduler(t)},i.prototype._then=function(t,e,n,r,o){var a=void 0!==o,s=a?o:new i(b),l=this._target(),u=l._bitField;a||(s._propagateFrom(this,3),s._captureStackTrace(),void 0===r&&0!==(2097152&this._bitField)&&(r=0!==(50397184&u)?this._boundValue():l===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,s));var p=c();if(0!==(50397184&u)){var f,_,d=l._settlePromiseCtx;0!==(33554432&u)?(_=l._rejectionHandler0,f=t):0!==(16777216&u)?(_=l._fulfillmentHandler0,f=e,l._unsetRejectionIsUnhandled()):(d=l._settlePromiseLateCancellationObserver,_=new m("late cancellation observer"),l._attachExtraTrace(_),f=e),v.invoke(d,l,{handler:null===p?f:"function"==typeof f&&h.domainBind(p,f),promise:s,receiver:r,value:_})}else l._addCallbacks(t,e,s,r,p);return s},i.prototype._length=function(){return 65535&this._bitField},i.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},i.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},i.prototype._setLength=function(t){this._bitField=-65536&this._bitField|65535&t},i.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},i.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},i.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},i.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},i.prototype._isFinal=function(){return(4194304&this._bitField)>0},i.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},i.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},i.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},i.prototype._setAsyncGuaranteed=function(){v.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},i.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[4*t-4+3];return e===f?void 0:void 0===e&&this._isBound()?this._boundValue():e},i.prototype._promiseAt=function(t){return this[4*t-4+2]},i.prototype._fulfillmentHandlerAt=function(t){return this[4*t-4+0]},i.prototype._rejectionHandlerAt=function(t){return this[4*t-4+1]},i.prototype._boundValue=function(){},i.prototype._migrateCallback0=function(t){var e=(t._bitField,t._fulfillmentHandler0),n=t._rejectionHandler0,r=t._promise0,i=t._receiverAt(0);void 0===i&&(i=f),this._addCallbacks(e,n,r,i,null)},i.prototype._migrateCallbackAt=function(t,e){var n=t._fulfillmentHandlerAt(e),r=t._rejectionHandlerAt(e),i=t._promiseAt(e),o=t._receiverAt(e);void 0===o&&(o=f),this._addCallbacks(n,r,i,o,null)},i.prototype._addCallbacks=function(t,e,n,r,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=r,"function"==typeof t&&(this._fulfillmentHandler0=null===i?t:h.domainBind(i,t)),"function"==typeof e&&(this._rejectionHandler0=null===i?e:h.domainBind(i,e));else{var a=4*o-4;this[a+2]=n,this[a+3]=r,"function"==typeof t&&(this[a+0]=null===i?t:h.domainBind(i,t)),"function"==typeof e&&(this[a+1]=null===i?e:h.domainBind(i,e))}return this._setLength(o+1),o},i.prototype._proxy=function(t,e){this._addCallbacks(void 0,void 0,e,t,null)},i.prototype._resolveCallback=function(t,e){if(0===(117506048&this._bitField)){if(t===this)return this._rejectCallback(l(),!1);var n=E(t,this);if(!(n instanceof i))return this._fulfill(t);e&&this._propagateFrom(n,2);var r=n._target();if(r===this)return void this._reject(l());var o=r._bitField;if(0===(50397184&o)){var a=this._length();a>0&&r._migrateCallback0(this);for(var s=1;a>s;++s)r._migrateCallbackAt(this,s);this._setFollowing(),this._setLength(0),this._setFollowee(r)}else if(0!==(33554432&o))this._fulfill(r._value());else if(0!==(16777216&o))this._reject(r._reason());else{var c=new m("late cancellation observer");r._attachExtraTrace(c),this._reject(c)}}},i.prototype._rejectCallback=function(t,e,n){var r=h.ensureErrorObject(t),i=r===t;if(!i&&!n&&F.warnings()){var o="a promise was rejected with a non-error: "+h.classString(t);this._warn(o,!0)}this._attachExtraTrace(r,e?i:!1),this._reject(t)},i.prototype._resolveFromExecutor=function(t){if(t!==b){var e=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(t,function(t){e._resolveCallback(t)},function(t){e._rejectCallback(t,n)});n=!1,this._popContext(),void 0!==r&&e._rejectCallback(r,!0)}},i.prototype._settlePromiseFromHandler=function(t,e,n,r){var i=r._bitField;if(0===(65536&i)){r._pushContext();var o;e===C?n&&"number"==typeof n.length?o=x(t).apply(this._boundValue(),n):(o=S,o.e=new g("cannot .spread() a non-array: "+h.classString(n))):o=x(t).call(e,n);var a=r._popContext();i=r._bitField,0===(65536&i)&&(o===w?r._reject(n):o===S?r._rejectCallback(o.e,!1):(F.checkForgottenReturns(o,a,"",r,this),r._resolveCallback(o)))}},i.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},i.prototype._followee=function(){return this._rejectionHandler0},i.prototype._setFollowee=function(t){this._rejectionHandler0=t},i.prototype._settlePromise=function(t,e,r,o){var a=t instanceof i,s=this._bitField,c=0!==(134217728&s);0!==(65536&s)?(a&&t._invokeInternalOnCancel(),r instanceof T&&r.isFinallyHandler()?(r.cancelPromise=t,x(e).call(r,o)===S&&t._reject(S.e)):e===u?t._fulfill(u.call(r)):r instanceof n?r._promiseCancelled(t):a||t instanceof k?t._cancel():r.cancel()):"function"==typeof e?a?(c&&t._setAsyncGuaranteed(),this._settlePromiseFromHandler(e,r,o,t)):e.call(r,o,t):r instanceof n?r._isResolved()||(0!==(33554432&s)?r._promiseFulfilled(o,t):r._promiseRejected(o,t)):a&&(c&&t._setAsyncGuaranteed(),0!==(33554432&s)?t._fulfill(o):t._reject(o))},i.prototype._settlePromiseLateCancellationObserver=function(t){var e=t.handler,n=t.promise,r=t.receiver,o=t.value;"function"==typeof e?n instanceof i?this._settlePromiseFromHandler(e,r,o,n):e.call(r,o,n):n instanceof i&&n._reject(o)},i.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value)},i.prototype._settlePromise0=function(t,e,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,t,i,e)},i.prototype._clearCallbackDataAtIndex=function(t){var e=4*t-4;this[e+2]=this[e+3]=this[e+0]=this[e+1]=void 0},i.prototype._fulfill=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(t===this){var n=l();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=t,(65535&e)>0&&(0!==(134217728&e)?this._settlePromises():v.settlePromises(this))}},i.prototype._reject=function(t){var e=this._bitField;if(!((117506048&e)>>>16))return this._setRejected(),this._fulfillmentHandler0=t,this._isFinal()?v.fatalError(t,h.isNode):void((65535&e)>0?v.settlePromises(this):this._ensurePossibleRejectionHandled())},i.prototype._fulfillPromises=function(t,e){for(var n=1;t>n;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},i.prototype._rejectPromises=function(t,e){for(var n=1;t>n;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},i.prototype._settlePromises=function(){var t=this._bitField,e=65535&t;if(e>0){if(0!==(16842752&t)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,t),this._rejectPromises(e,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,t),this._fulfillPromises(e,r)}this._setLength(0)}this._clearCancellationData()},i.prototype._settledValue=function(){var t=this._bitField;return 0!==(33554432&t)?this._rejectionHandler0:0!==(16777216&t)?this._fulfillmentHandler0:void 0},i.defer=i.pending=function(){F.deprecated("Promise.defer","new Promise");var t=new i(b);return{promise:t,resolve:o,reject:a}},h.notEnumerableProp(i,"_makeSelfResolutionError",l),t("./method")(i,b,E,p,F),t("./bind")(i,b,E,F),t("./cancel")(i,k,p,F),t("./direct_resolve")(i),t("./synchronous_inspection")(i),t("./join")(i,k,E,b,v,c),i.Promise=i,i.version="3.5.1",h.toFastProperties(i),h.toFastProperties(i.prototype),s({a:1}),s({b:2}),s({c:3}),s(1),s(function(){}),s(void 0),s(!1),s(new i(b)),F.setBounds(d.firstLineError,h.lastLineError),i}},{"./async":1,"./bind":2,"./cancel":4,"./catch_filter":5,"./context":6,"./debuggability":7,"./direct_resolve":8,"./errors":9,"./es5":10,"./finally":11,"./join":12,"./method":13,"./nodeback":14,"./promise_array":16,"./synchronous_inspection":19,"./thenables":20,"./util":21}],16:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){function a(t){switch(t){case-2:return[];case-3:return{};case-6:return new Map}}function s(t){var r=this._promise=new e(n);t instanceof e&&r._propagateFrom(t,3),r._setOnCancel(this),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var c=t("./util");c.isArray;return c.inherits(s,o),s.prototype.length=function(){return this._length},s.prototype.promise=function(){return this._promise},s.prototype._init=function l(t,n){var o=r(this._values,this._promise);if(o instanceof e){o=o._target();var s=o._bitField;if(this._values=o,0===(50397184&s))return this._promise._setAsyncGuaranteed(),o._then(l,this._reject,void 0,this,n);if(0===(33554432&s))return 0!==(16777216&s)?this._reject(o._reason()):this._cancel();o=o._value()}if(o=c.asArray(o),null===o){var u=i("expecting an array or an iterable object but got "+c.classString(o)).reason();return void this._promise._rejectCallback(u,!1)}return 0===o.length?void(-5===n?this._resolveEmptyArray():this._resolve(a(n))):void this._iterate(o)},s.prototype._iterate=function(t){var n=this.getActualLength(t.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var i=this._promise,o=!1,a=null,s=0;n>s;++s){var c=r(t[s],i);c instanceof e?(c=c._target(),a=c._bitField):a=null,o?null!==a&&c.suppressUnhandledRejections():null!==a?0===(50397184&a)?(c._proxy(this,s),this._values[s]=c):o=0!==(33554432&a)?this._promiseFulfilled(c._value(),s):0!==(16777216&a)?this._promiseRejected(c._reason(),s):this._promiseCancelled(s):o=this._promiseFulfilled(c,s)}o||i._setAsyncGuaranteed()},s.prototype._isResolved=function(){return null===this._values},s.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},s.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},s.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1)},s.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var n=++this._totalResolved;return n>=this._length?(this._resolve(this._values),!0):!1},s.prototype._promiseCancelled=function(){return this._cancel(),!0},s.prototype._promiseRejected=function(t){return this._totalResolved++,this._reject(t),!0},s.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;if(this._cancel(),t instanceof e)t.cancel();else for(var n=0;n<t.length;++n)t[n]instanceof e&&t[n].cancel()}},s.prototype.shouldCopyValues=function(){return!0},s.prototype.getActualLength=function(t){return t},s}},{"./util":21}],17:[function(t,e,n){"use strict";function r(t,e,n,r,i){for(var o=0;i>o;++o)n[o+r]=t[o+e],t[o+e]=void 0}function i(t){this._capacity=t,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(t){return this._capacity<t},i.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1);var n=this._front+e&this._capacity-1;this[n]=t,this._length=e+1},i.prototype.push=function(t,e,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(t),this._pushOne(e),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=t,this[i+1&o]=e,this[i+2&o]=n,this._length=r},i.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t;var n=this._front,i=this._length,o=n+i&e-1;r(this,0,this,e,o)},e.exports=i},{}],18:[function(t,e,n){"use strict";var r,i=t("./util"),o=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},a=i.getNativePromise();if(i.isNode&&"undefined"==typeof MutationObserver){var s=global.setImmediate,c=process.nextTick;r=i.isRecentNode?function(t){s.call(global,t)}:function(t){c.call(process,t)}}else if("function"==typeof a&&"function"==typeof a.resolve){var l=a.resolve();r=function(t){l.then(t)}}else r="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?"undefined"!=typeof setImmediate?function(t){setImmediate(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:o:function(){var t=document.createElement("div"),e={attributes:!0},n=!1,r=document.createElement("div"),i=new MutationObserver(function(){t.classList.toggle("foo"),n=!1});i.observe(r,e);var o=function(){n||(n=!0,r.classList.toggle("foo"))};return function(n){var r=new MutationObserver(function(){r.disconnect(),n()});r.observe(t,e),o()}}();e.exports=r},{"./util":21}],19:[function(t,e,n){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValueField=t._isFateSealed()?t._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var n=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=e.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},o=e.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},a=e.prototype.isPending=function(){return 0===(50397184&this._bitField)},s=e.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};e.prototype.isCancelled=function(){return 0!==(8454144&this._bitField)},t.prototype.__isCancelled=function(){return 65536===(65536&this._bitField)},t.prototype._isCancelled=function(){return this._target().__isCancelled()},t.prototype.isCancelled=function(){return 0!==(8454144&this._target()._bitField)},t.prototype.isPending=function(){return a.call(this._target())},t.prototype.isRejected=function(){return o.call(this._target())},t.prototype.isFulfilled=function(){return i.call(this._target())},t.prototype.isResolved=function(){return s.call(this._target())},t.prototype.value=function(){return n.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),r.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}},{}],20:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t,r){if(u(t)){if(t instanceof e)return t;var i=o(t);if(i===l){r&&r._pushContext();var c=e.reject(i.e);return r&&r._popContext(),c}if("function"==typeof i){if(a(t)){var c=new e(n);return t._then(c._fulfill,c._reject,void 0,c,null),c}return s(t,i,r)}}return t}function i(t){return t.then}function o(t){try{return i(t)}catch(e){return l.e=e,l}}function a(t){try{return p.call(t,"_promise0")}catch(e){return!1}}function s(t,r,i){function o(t){s&&(s._resolveCallback(t),s=null)}function a(t){s&&(s._rejectCallback(t,p,!0),s=null)}var s=new e(n),u=s;i&&i._pushContext(),s._captureStackTrace(),i&&i._popContext();var p=!0,f=c.tryCatch(r).call(t,o,a);return p=!1,s&&f===l&&(s._rejectCallback(f.e,!0,!0),s=null),u}var c=t("./util"),l=c.errorObj,u=c.isObject,p={}.hasOwnProperty;return r}},{"./util":21}],21:[function(t,e,n){"use strict";function r(){try{var t=R;return R=null,t.apply(this,arguments)}catch(e){return P.e=e,P}}function i(t){return R=t,r}function o(t){return null==t||t===!0||t===!1||"string"==typeof t||"number"==typeof t}function a(t){return"function"==typeof t||"object"==typeof t&&null!==t}function s(t){return o(t)?new Error(v(t)):t}function c(t,e){var n,r=t.length,i=new Array(r+1);for(n=0;r>n;++n)i[n]=t[n];return i[n]=e,i}function l(t,e,n){if(!F.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var r=Object.getOwnPropertyDescriptor(t,e);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function u(t,e,n){if(o(t))return t;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return F.defineProperty(t,e,r),t}function p(t){throw t}function f(t){try{if("function"==typeof t){var e=F.names(t.prototype),n=F.isES5&&e.length>1,r=e.length>0&&!(1===e.length&&"constructor"===e[0]),i=A.test(t+"")&&F.names(t).length>0;if(n||r||i)return!0}return!1}catch(o){return!1}}function h(t){function e(){}e.prototype=t;for(var n=8;n--;)new e;return t}function _(t){return N.test(t)}function d(t,e,n){for(var r=new Array(t),i=0;t>i;++i)r[i]=e+i+n;return r}function v(t){try{return t+""}catch(e){return"[no string representation]"}}function y(t){return t instanceof Error||null!==t&&"object"==typeof t&&"string"==typeof t.message&&"string"==typeof t.name}function g(t){try{u(t,"isOperational",!0)}catch(e){}}function m(t){return null==t?!1:t instanceof Error.__BluebirdErrorTypes__.OperationalError||t.isOperational===!0}function b(t){return y(t)&&F.propertyIsWritable(t,"stack")}function C(t){return{}.toString.call(t)}function w(t,e,n){for(var r=F.names(t),i=0;i<r.length;++i){var o=r[i];if(n(o))try{F.defineProperty(e,o,F.getDescriptor(t,o))}catch(a){}}}function E(t){return H?process.env[t]:void 0}function k(){if("function"==typeof Promise)try{var t=new Promise(function(){});if("[object Promise]"==={}.toString.call(t))return Promise}catch(e){}}function j(t,e){return t.bind(e)}var F=t("./es5"),T="undefined"==typeof navigator,P={e:{}},R,S="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0!==this?this:null,x=function(t,e){function n(){this.constructor=t,this.constructor$=e;for(var n in e.prototype)r.call(e.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=e.prototype[n])}var r={}.hasOwn